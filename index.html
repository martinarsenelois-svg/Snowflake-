<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>â„ï¸ Snowflake Chat</title>

  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- PWA / iOS Safe -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>

<body class="login">

<!-- ================= LOGIN SCREEN ================= -->
<div id="loginScreen" class="screen login-screen">
  <div class="login-card">
    <div class="logo">â„ï¸</div>
    <h1>Snowflake</h1>
    <p class="subtitle">Private 1-to-1 Chat</p>

    <input id="nameInput" type="text" placeholder="Your name" autocomplete="name" />
    <input id="passwordInput" type="password" placeholder="Chat password" />

    <button id="loginBtn">Enter Chat</button>
    <div id="loginError" class="error"></div>
  </div>
</div>

<!-- ================= CHAT SCREEN ================= -->
<div id="chatScreen" class="screen hidden">

  <!-- Header -->
  <header class="chat-header">
    <div class="chat-title">
      <span id="chatName">Private Chat</span>
      <small id="chatStatus">offline</small>
    </div>

    <div class="header-actions">
      <button id="exportChatBtn" title="Export chat">â¬‡</button>
      <button id="themeToggle" title="Toggle theme">ğŸŒ™</button>
    </div>
  </header>

  <!-- Messages -->
  <div id="messages" class="messages"></div>

  <!-- Typing -->
  <div id="typingIndicator" class="typing"></div>

  <!-- Reply Preview -->
  <div id="replyBar" class="reply-bar hidden">
    <div class="reply-content">
      <strong>Replying to:</strong>
      <span id="replyText"></span>
    </div>
    <button id="cancelReply">âœ–</button>
  </div>

  <!-- Composer -->
  <div class="composer">
    <div id="replyBar" class="reply-bar hidden">
  <span id="replyText"></span>
  <button id="cancelReply">âœ•</button>
</div>
<input id="fileInput" type="file" accept="image/*,audio/*" hidden />

    <button id="attachBtn" title="Attach">ğŸ“</button>
    <button id="recordBtn" title="Voice">ğŸ™</button>

    <input
      id="messageInput"
      type="text"
      placeholder="Message"
      autocomplete="off"
    />

    <button id="sendBtn">Send</button>
  </div>
</div>

<!-- ================= MESSAGE ACTION MENU ================= -->
<div id="msgMenu" class="msg-menu hidden">
  <button data-action="reply">Reply</button>
  <button data-action="delete-me">Delete for me</button>
  <button data-action="delete-all">Delete for everyone</button>
  <button data-action="hard-delete" class="danger">Admin hard delete</button>
</div>

<!-- ================= FIREBASE v8 ================= -->
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<!-- App -->
<script src="script.js"></script>
</body>
</html>