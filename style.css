:root{
  --accent:#7e57c2;
  --glass:rgba(255,255,255,0.85);
  --bg1:#bfeafe;
  --bg2:#7e57c2;
  --radius:14px;
  --muted:#6b7280;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif}
body{
  display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));transition:background .4s;color:#0b1220;overflow:hidden;padding:20px;
}
body.dark{background:linear-gradient(180deg,#061021,#0b1220);color:#e6eef6}

/* Topbar */
.topbar{z-index:6;position:sticky;top:12px;width:100%;max-width:980px;margin:0 0 18px;border-radius:var(--radius);padding:10px 14px;display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,0.7);backdrop-filter:blur(6px);box-shadow:0 8px 24px rgba(2,6,23,0.12)}
body.dark .topbar{background:rgba(8,10,16,0.45)}
.topbar .left{display:flex;align-items:center;gap:12px}
.topbar img{width:44px;height:44px;border-radius:10px}
.topbar .title{font-weight:700}
.topbar .right{display:flex;gap:8px}
.icon{background:transparent;border:none;font-size:18px;cursor:pointer;padding:8px;border-radius:8px}

/* Panels */
.panel{z-index:6;background:var(--glass);border-radius:var(--radius);padding:16px;width:100%;max-width:420px;margin-top:8px;box-shadow:0 10px 30px rgba(2,6,23,0.08)}
.center{text-align:center}
.row{display:flex;gap:8px;margin-top:12px}
.row input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(11,17,32,0.06)}
.row button{padding:10px 12px;border-radius:10px;border:none;background:var(--accent);color:#fff;cursor:pointer}
.muted{color:var(--muted);font-size:13px}
.error{color:#d9534f;margin-top:8px}

/* Chat screen */
#chat-screen{z-index:5;width:100%;max-width:980px;height:74vh;margin-top:12px;background:rgba(255,255,255,0.85);backdrop-filter:blur(6px);border-radius:var(--radius);padding:10px;display:flex;flex-direction:column}
body.dark #chat-screen{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
.pane{flex:1;display:flex;flex-direction:column;gap:8px}
.messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
.typing{height:18px;padding-left:8px;color:var(--muted);font-size:13px}

/* Composer */
.composer{display:flex;gap:8px;align-items:center;padding:8px;border-radius:12px;background:rgba(255,255,255,0.95)}
.composer input[type="text"]{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(11,17,32,0.06)}
.composer button{padding:10px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,#9f7ae6,var(--accent));color:#fff;cursor:pointer}

/* Message bubbles */
.msg{max-width:72%;padding:12px;border-radius:12px;position:relative;animation:pop .12s ease;word-wrap:break-word;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
.msg.me{margin-left:auto;background:linear-gradient(180deg,var(--accent),#5b3ea6);color:#fff;border-bottom-right-radius:6px}
.msg.other{margin-right:auto;background:rgba(255,255,255,0.96);border:1px solid rgba(11,17,32,0.04)}
.msg .meta{font-size:11px;opacity:0.9;margin-top:8px;display:flex;gap:8px;align-items:center;justify-content:space-between}
.msg img{max-width:220px;border-radius:10px;display:block;margin-top:6px}
.tick{font-size:12px;opacity:0.95}

/* menu */
.msg-menu{position:absolute;top:6px;right:8px}
.menu-btn{background:none;border:none;font-size:18px;cursor:pointer;color:inherit;padding:2px;border-radius:6px}
.menu-options{position:absolute;right:0;top:28px;background:#fff;padding:6px 8px;border-radius:8px;box-shadow:0 4px 14px rgba(2,6,23,0.12);display:none;z-index:20}
.menu-options.show{display:block}
.menu-options .opt{padding:6px 10px;cursor:pointer;white-space:nowrap;border-radius:6px}
.menu-options .opt:hover{background:#f0f0f0}

#loader{position:fixed;bottom:86px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.7);color:white;padding:8px 16px;border-radius:10px;font-size:14px;display:none;z-index:999}

@keyframes pop{from{transform:translateY(6px);opacity:0}to{transform:none;opacity:1}}

/* Responsive */
@media (max-width:820px){
  .topbar{padding:8px;}
  .panel{width:98%}
  #chat-screen{height:80vh;width:98%}
  .msg{max-width:86%}
}